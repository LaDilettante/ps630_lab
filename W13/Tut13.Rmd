---
title: "Tutorial 13: Autocorrelation, Fixed Effects, and Causal Inference Techniques"
author: "Jan Vogler (jan.vogler@duke.edu)"
date: "November 20, 2015"
output: pdf_document
---

# Today's Agenda

1. Autocorrelation
2. Fixed-effects regression
3. Spatial lag models
4. Differences-in-differences
5. Regression discontinuity designs



# 1. Autocorrelation

Create lags with DataCombine.

install.packages("DataCombine")

```{r,tidy=TRUE}
library(DataCombine)

toLag = c("Swing","Swing2","ind_pct","ind_pct2","EducCh1","EducCh2","HealthCh","Educ1_Pct_GSP","Educ2_Pct_GSP","Health_Pct_GSP_CP","Health_Pct_Pop","GovIdeo","Ranney","Inst_Pct","Pop_5to17","Pop_5to17_Pct","Pop_5to17Ch","Pop_65Ch","Pop_65up_Pct")

for (lagVar in toLag){
combi1=slide(combi1, Var=lagVar, TimeVar="year", GroupVar="stcode", NewVar=paste0("lag1_",lagVar), slideBy = -1, keepInvalid = FALSE, reminder = TRUE)
}

for (lagVar in toLag){
  combi1=slide(combi1, Var=lagVar, TimeVar="year", GroupVar="stcode", NewVar=paste0("lag2_",lagVar), slideBy = -2, keepInvalid = FALSE, reminder = TRUE)
}

for (lagVar in toLag){
  combi1=slide(combi1, Var=lagVar, TimeVar="year", GroupVar="stcode", NewVar=paste0("lag3_",lagVar), slideBy = -3, keepInvalid = FALSE, reminder = TRUE)
}
```



# 2. Fixed-effects regression



# 3. Spatial lag models



# 4. Differences-in-differences

Differences-in-differences analysis makes use of parallel time trends.



# 5. Regression discontinuity designs

Regression discontinuity designs are powerful tools for causal inference.

install.packages("rdd")

```{r,tidy=TRUE}
library(rdd)
```



## Remember

```{r,tidy=TRUE}
fun=c("R","is","fun")
paste(fun, collapse=" ")
```